import{r as b,j as e}from"./index-CqTRq1Up.js";const P="DetailersK00",v={heroVideo:"kaizen_admin_heroVideo",packages:"kaizen_admin_packages",portfolio:"kaizen_admin_portfolio"};function S(a,i){const[c,p]=b.useState(()=>{try{const l=localStorage.getItem(a);return l?JSON.parse(l):i}catch{return i}});return[c,l=>{p(l),localStorage.setItem(a,JSON.stringify(l))}]}function U(){const[a,i]=S(v.heroVideo,{url:"/videoplayback.mp4"}),[c,p]=b.useState(a.url),[n,l]=b.useState(null),[d,s]=b.useState(!1),g=()=>{i({url:c}),s(!0),setTimeout(()=>s(!1),2e3)},m=f=>{var u;const t=(u=f.target.files)==null?void 0:u[0];if(!t)return;l(t);const r=URL.createObjectURL(t);p(r)};return e.jsxs("div",{className:"admin-section",children:[e.jsx("h3",{children:"Hero Video"}),e.jsx("p",{className:"admin-hint",children:"Enter a URL or upload a video file for the hero section."}),e.jsx("label",{className:"admin-label",children:"Video URL"}),e.jsx("input",{type:"text",value:c,onChange:f=>p(f.target.value),className:"admin-input",placeholder:"/videoplayback.mp4 or https://..."}),e.jsx("label",{className:"admin-label",style:{marginTop:"1rem"},children:"Or upload file"}),e.jsx("input",{type:"file",accept:"video/*",onChange:m,className:"admin-file"}),c&&e.jsx("div",{className:"admin-preview",style:{marginTop:"1rem"},children:e.jsx("video",{src:c,controls:!0,muted:!0,style:{width:"100%",maxWidth:480,borderRadius:8}})}),e.jsx("button",{className:"admin-btn",onClick:g,children:d?"Saved!":"Save"})]})}const j=[{id:"silver",name:{EN:"Silver",RU:"Серебро",AR:"الفضي"},note:{EN:"Essential clean with wax + leather care",RU:"Базовая чистка + воск и уход за кожей",AR:"تنظيف أساسي مع شمع وعناية بالجلد"},price:{amount:699,currency:"AED"},featured:!1,highlights:{EN:["Two-stage wash + wax","Wheels & rims","Interior Tornador + vacuum","Leather cleaned + protected"],RU:["Двухфазная мойка + воск","Диски и колёса","Салон: Tornador + пылесос","Кожа: чистка и защита"],AR:["غسيل ثنائي + شمع","الجنوط والعجلات","الداخلية: Tornador + مكنسة","تنظيف الجلد وحمايته"]},includes:{EN:["Two-stage wash + wax sealant","Wheels & rims cleaned","Interior refresh (Tornador + vacuum)","Seats, upholstery & mats cleaned","Leather cleaned + protected"],RU:["Двухфазная мойка + воск","Чистка дисков и колёс","Чистка салона (Tornador + пылесос)","Сиденья, обивка и коврики: чистка","Кожа: чистка и защита"],AR:["غسيل ثنائي المراحل مع شمع حماية","تنظيف الجنوط والعجلات","تنظيف داخلي (Tornador + مكنسة)","تنظيف المقاعد والتنجيد والحصائر","تنظيف الجلد وحمايته"]}},{id:"gold",name:{EN:"Gold",RU:"Золото",AR:"الذهبي"},note:{EN:"Deep detail + correction and UV protection",RU:"Глубокий детейлинг + полировка и UV-защита",AR:"تنظيف عميق مع تلميع وحماية من UV"},price:{amount:1099,currency:"AED"},featured:!0,highlights:{EN:["Deep interior + mats detail","Wheels deep clean","Scratch-refinement polish","UV protection + water-spot removal"],RU:["Глубокая чистка салона и ковриков","Глубокая чистка колёс","Полировка от мелких царапин","UV-защита + удаление водных пятен"],AR:["تنظيف داخلي عميق مع الحصائر","تنظيف عميق للعجلات","تلميع للخدوش السطحية","حماية UV مع إزالة بقع الماء"]},includes:{EN:["Two-stage wash","Deep wheels & rims detail","Deep interior + mats detail","Leather deep clean + UV shield","Scratch-refinement polish","Water-spot removal","High-gloss wax sealant","Interior plastics cleaned + UV protection","Final quality inspection"],RU:["Двухфазная мойка","Глубокая чистка дисков и колёс","Глубокая чистка салона и ковриков","Кожа: глубокая чистка + UV-защита","Полировка от мелких царапин","Удаление водных пятен и известкового налёта","Воск: глубокий блеск и защита","Пластик в салоне: чистка + UV-защита","Финальный контроль качества"],AR:["غسيل ثنائي المراحل","تنظيف عميق للجنوط والعجلات","تنظيف داخلي عميق مع الحصائر","تنظيف عميق للجلد مع حماية من UV","تلميع لإزالة خدوش سطحية","إزالة بقع الماء وآثار الكلس","شمع لمعان عميق وحماية للطلاء","تنظيف بلاستيك المقصورة مع حماية من UV","فحص نهائي وضمان الجودة"]}},{id:"platinum",name:{EN:"Platinum",RU:"Платина",AR:"البلاتيني"},note:{EN:"Full correction + ceramic coating",RU:"Полная полировка + керамика",AR:"تصحيح كامل مع طلاء سيراميك"},price:{amount:1299,currency:"AED"},featured:!1,highlights:{EN:["Everything in Gold","Tar + brake-dust removal","Full-body machine polish","Ceramic coating"],RU:["Всё из пакета «Золото»","Удаление битума и тормозной пыли","Полировка кузова","Керамическое покрытие"],AR:["كل ما في الباقة الذهبية","إزالة القطران وغبار الفرامل","تلميع كامل للهيكل","طلاء سيراميك"]},includes:{EN:["Everything in Gold","Hand decontamination wash","Tar & brake-dust removal","Full-body machine polish","Ceramic coating application","Final quality inspection"],RU:["Всё из пакета «Золото»","Глубокая ручная чистка кузова","Удаление битума и налёта тормозной пыли","Полировка кузова","Нанесение керамики","Финальный контроль качества"],AR:["كل ما في الباقة الذهبية","تنظيف يدوي عميق للهيكل","إزالة القطران وبقايا غبار الفرامل","تلميع كامل للهيكل","تطبيق طلاء سيراميك","فحص نهائي وضمان الجودة"]}}];function C({pkg:a,onChange:i,onRemove:c,canRemove:p}){const[n,l]=b.useState("EN"),d=(t,r)=>{i({...a,[t]:r})},s=(t,r)=>{i({...a,[t]:{...a[t],[n]:r}})},g=(t,r,u)=>{const o=[...a[t][n]||[]];o[r]=u,i({...a,[t]:{...a[t],[n]:o}})},m=t=>{const r=[...a[t][n]||[],""];i({...a,[t]:{...a[t],[n]:r}})},f=(t,r)=>{const u=(a[t][n]||[]).filter((o,h)=>h!==r);i({...a,[t]:{...a[t],[n]:u}})};return e.jsxs("div",{className:"admin-package-card",children:[e.jsxs("div",{className:"admin-package-header",children:[e.jsxs("h4",{children:[a.name.EN," (",a.id,")"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[p&&e.jsx("button",{className:"admin-btn-sm admin-btn-danger",onClick:c,children:"Remove"}),e.jsx("div",{className:"admin-lang-tabs",children:["EN","RU","AR"].map(t=>e.jsx("button",{className:`admin-lang-tab ${n===t?"active":""}`,onClick:()=>l(t),children:t},t))})]})]}),e.jsxs("div",{className:"admin-row",children:[e.jsxs("div",{children:[e.jsx("label",{className:"admin-label",children:"ID"}),e.jsx("input",{className:"admin-input",value:a.id||"",onChange:t=>d("id",t.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"admin-label",children:["Name (",n,")"]}),e.jsx("input",{className:"admin-input",value:a.name[n]||"",onChange:t=>s("name",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"admin-label",children:"Price (AED)"}),e.jsx("input",{className:"admin-input",type:"number",value:a.price.amount,onChange:t=>d("price",{...a.price,amount:Number(t.target.value)})})]})]}),e.jsxs("label",{className:"admin-label",children:["Note (",n,")"]}),e.jsx("input",{className:"admin-input",value:a.note[n]||"",onChange:t=>s("note",t.target.value)}),e.jsx("label",{className:"admin-label",children:"Featured"}),e.jsxs("label",{className:"admin-checkbox",children:[e.jsx("input",{type:"checkbox",checked:a.featured,onChange:t=>d("featured",t.target.checked)}),"Mark as featured (gold border)"]}),e.jsxs("label",{className:"admin-label",style:{marginTop:"1rem"},children:["Highlights (",n,")"]}),(a.highlights[n]||[]).map((t,r)=>e.jsxs("div",{className:"admin-list-row",children:[e.jsx("input",{className:"admin-input",value:t,onChange:u=>g("highlights",r,u.target.value)}),e.jsx("button",{className:"admin-btn-sm admin-btn-danger",onClick:()=>f("highlights",r),children:"x"})]},r)),e.jsx("button",{className:"admin-btn-sm",onClick:()=>m("highlights"),children:"+ Add highlight"}),e.jsxs("label",{className:"admin-label",style:{marginTop:"1rem"},children:["Full checklist (",n,")"]}),(a.includes[n]||[]).map((t,r)=>e.jsxs("div",{className:"admin-list-row",children:[e.jsx("input",{className:"admin-input",value:t,onChange:u=>g("includes",r,u.target.value)}),e.jsx("button",{className:"admin-btn-sm admin-btn-danger",onClick:()=>f("includes",r),children:"x"})]},r)),e.jsx("button",{className:"admin-btn-sm",onClick:()=>m("includes"),children:"+ Add item"})]})}const N=[{id:"auto",label:"Auto detailing"},{id:"moto",label:"Moto detailing"},{id:"motorhome",label:"Motorhome detailing"},{id:"yacht",label:"Yacht detailing"},{id:"home",label:"Home & Office detailing"}];function y(){const a={};return N.forEach(i=>{a[i.id]=JSON.parse(JSON.stringify(j))}),a}function T(){return{id:`package-${Date.now()}`,name:{EN:"New package",RU:"Новый пакет",AR:"باقة جديدة"},note:{EN:"",RU:"",AR:""},price:{amount:0,currency:"AED"},featured:!1,highlights:{EN:[],RU:[],AR:[]},includes:{EN:[],RU:[],AR:[]}}}function k(){const[a,i]=S(v.packages,y()),[c,p]=b.useState("auto"),[n,l]=b.useState(!1),d=(()=>{if(Array.isArray(a)){const h=y();return N.forEach(x=>{h[x.id]=JSON.parse(JSON.stringify(a))}),h}const o={...a};return N.forEach(h=>{o[h.id]||(o[h.id]=JSON.parse(JSON.stringify(j)))}),o})(),s=d[c]||j,g=(o,h)=>{const x=[...s];x[o]=h;const R={...d,[c]:x};i(R)},m=()=>{const o=[...s,T()],h={...d,[c]:o};i(h)},f=o=>{if(s.length<=1||!window.confirm("Remove this package?"))return;const h=s.filter((R,E)=>E!==o),x={...d,[c]:h};i(x)},t=()=>{localStorage.setItem(v.packages,JSON.stringify(d)),l(!0),setTimeout(()=>l(!1),2e3)},r=()=>{var o;if(window.confirm(`Reset pricing for "${(o=N.find(h=>h.id===c))==null?void 0:o.label}" to defaults?`)){const h={...d,[c]:JSON.parse(JSON.stringify(j))};i(h),localStorage.setItem(v.packages,JSON.stringify(h))}},u=()=>{if(window.confirm("Reset ALL service pricing to defaults?")){const o=y();i(o),localStorage.setItem(v.packages,JSON.stringify(o))}};return e.jsxs("div",{className:"admin-section",children:[e.jsx("h3",{children:"Pricing Packages"}),e.jsx("p",{className:"admin-hint",children:"Select a service category, then edit its packages. Each service has its own Silver / Gold / Platinum pricing."}),e.jsx("div",{className:"admin-service-tabs",children:N.map(o=>e.jsx("button",{className:`admin-service-tab ${c===o.id?"active":""}`,onClick:()=>p(o.id),children:o.label},o.id))}),s.map((o,h)=>e.jsx(C,{pkg:o,onChange:x=>g(h,x),onRemove:()=>f(h),canRemove:s.length>1},`${c}-${o.id}-${h}`)),e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{className:"admin-btn admin-btn-outline",onClick:m,children:"+ Add package"}),e.jsx("button",{className:"admin-btn",onClick:t,children:n?"Saved!":"Save all packages"}),e.jsx("button",{className:"admin-btn admin-btn-outline",onClick:r,children:"Reset this service"}),e.jsx("button",{className:"admin-btn admin-btn-outline",onClick:u,children:"Reset all services"})]})]})}const A=[{id:"1",category:"Sedan",title:"BMW M8 2023",description:"Premium full-body detailing & protection",before:"https://images.unsplash.com/photo-1493238792000-8113da705763?q=80&w=1400&auto=format&fit=crop",after:"https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=1400&auto=format&fit=crop"}];function w(a){return Array.isArray(a)?a.map((i,c)=>{const n=(i.parts&&typeof i.parts=="object"?Object.values(i.parts):[])[0]||{};return{id:i.id||String(Date.now()+c),category:i.category||`Tab ${c+1}`,title:i.title||i.modelTitle||"BMW M8 2023",description:i.description||i.modelDescription||i.subtitle||"Premium full-body detailing & protection",before:i.before||i.firstImage||n.before||"",after:i.after||i.secondImage||n.after||""}}):A}function I(a){return a&&typeof a=="object"&&!Array.isArray(a)?{visible:a.visible!==!1,items:w(a.items)}:{visible:!0,items:w(a)}}async function O(a,{maxWidth:i=1600,quality:c=.82}={}){const p=URL.createObjectURL(a);try{const n=await new Promise((r,u)=>{const o=new Image;o.onload=()=>r(o),o.onerror=u,o.src=p}),l=n.width>i?i/n.width:1,d=Math.max(1,Math.round(n.width*l)),s=Math.max(1,Math.round(n.height*l)),g=document.createElement("canvas");g.width=d,g.height=s,g.getContext("2d").drawImage(n,0,0,d,s);const t=a.type==="image/png"?"image/png":"image/jpeg";return g.toDataURL(t,c)}finally{URL.revokeObjectURL(p)}}function D({item:a,onChange:i,onRemove:c}){const[p,n]=b.useState(null),l=(s,g)=>{i({...a,[s]:g})},d=async(s,g)=>{var f;const m=(f=g.target.files)==null?void 0:f[0];if(m){if(!m.type.startsWith("image/")){window.alert("Please select an image file.");return}try{n(s);const t=await O(m);l(s,t)}catch{window.alert("Failed to process image. Please try another file.")}finally{n(null),g.target.value=""}}};return e.jsxs("div",{className:"admin-portfolio-card",children:[e.jsxs("div",{className:"admin-portfolio-header",children:[e.jsx("h4",{children:a.category||"New tab"}),e.jsx("button",{className:"admin-btn-sm admin-btn-danger",onClick:c,children:"Remove"})]}),e.jsx("label",{className:"admin-label",children:"Tab name (top button)"}),e.jsx("input",{className:"admin-input",value:a.category,onChange:s=>l("category",s.target.value),placeholder:"Sedan"}),e.jsx("label",{className:"admin-label",style:{marginTop:"1rem"},children:"Card title (right side)"}),e.jsx("input",{className:"admin-input",value:a.title||"",onChange:s=>l("title",s.target.value),placeholder:"BMW M8 2023"}),e.jsx("label",{className:"admin-label",style:{marginTop:"1rem"},children:"Card description (right side)"}),e.jsx("input",{className:"admin-input",value:a.description||"",onChange:s=>l("description",s.target.value),placeholder:"Premium full-body detailing & protection"}),e.jsx("label",{className:"admin-label",style:{marginTop:"1rem"},children:"1st photo (Before)"}),e.jsx("input",{className:"admin-input",value:a.before||"",onChange:s=>l("before",s.target.value),placeholder:"https://..."}),e.jsx("label",{className:"admin-label",style:{marginTop:"0.65rem"},children:"Or upload from files"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>d("before",s),className:"admin-file"}),p==="before"&&e.jsx("p",{className:"admin-hint",style:{marginTop:"0.4rem",marginBottom:0},children:"Uploading..."}),a.before&&e.jsx("img",{src:a.before,alt:"before",className:"admin-thumb"}),e.jsx("label",{className:"admin-label",style:{marginTop:"1rem"},children:"2nd photo (After)"}),e.jsx("input",{className:"admin-input",value:a.after||"",onChange:s=>l("after",s.target.value),placeholder:"https://..."}),e.jsx("label",{className:"admin-label",style:{marginTop:"0.65rem"},children:"Or upload from files"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>d("after",s),className:"admin-file"}),p==="after"&&e.jsx("p",{className:"admin-hint",style:{marginTop:"0.4rem",marginBottom:0},children:"Uploading..."}),a.after&&e.jsx("img",{src:a.after,alt:"after",className:"admin-thumb"})]})}function L(){const[a,i]=S(v.portfolio,{visible:!0,items:A}),[c,p]=b.useState(!1),n=I(a),l=n.items;b.useEffect(()=>{Array.isArray(a)&&a.some(r=>r.parts)&&i({visible:!0,items:l})},[a,l,i]);const d=(t,r)=>{const u=[...l];u[t]=r,i({...n,items:u})},s=()=>{i({...n,items:[...l,{id:String(Date.now()),category:"New tab",title:"BMW M8 2023",description:"Premium full-body detailing & protection",before:"",after:""}]})},g=t=>{window.confirm("Remove this portfolio item?")&&i({...n,items:l.filter((r,u)=>u!==t)})},m=t=>{i({...n,visible:t})},f=()=>{localStorage.setItem(v.portfolio,JSON.stringify({visible:n.visible!==!1,items:l})),p(!0),setTimeout(()=>p(!1),2e3)};return e.jsxs("div",{className:"admin-section",children:[e.jsx("h3",{children:"Portfolio"}),e.jsx("p",{className:"admin-hint",children:"Add top tabs for portfolio and assign exactly two images for the compare widget (1st photo / 2nd photo)."}),e.jsx("p",{className:"admin-hint",style:{marginTop:"-0.9rem"},children:"You can paste image URLs or upload files directly."}),e.jsxs("label",{className:"admin-checkbox",style:{marginBottom:"1rem"},children:[e.jsx("input",{type:"checkbox",checked:n.visible!==!1,onChange:t=>m(t.target.checked)}),'Show "Our Portfolio" section on site (header + section block)']}),l.map((t,r)=>e.jsx(D,{item:t,onChange:u=>d(r,u),onRemove:()=>g(r)},t.id)),e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{className:"admin-btn admin-btn-outline",onClick:s,children:"+ Add portfolio item"}),e.jsx("button",{className:"admin-btn",onClick:f,children:c?"Saved!":"Save portfolio"})]})]})}function F(){const[a,i]=b.useState(!1),[c,p]=b.useState(""),[n,l]=b.useState(""),[d,s]=b.useState("video"),g=m=>{m.preventDefault(),c===P?(i(!0),l("")):l("Wrong password")};return a?e.jsxs("div",{className:"admin-page",children:[e.jsx("header",{className:"admin-header",children:e.jsxs("div",{className:"admin-header-inner",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("img",{src:"/logo_white.svg",alt:"Kaizen Detailers",style:{width:32}}),e.jsx("h1",{children:"Kaizen Admin"})]}),e.jsx("a",{href:"/",className:"admin-btn admin-btn-outline",style:{fontSize:"0.85rem"},children:"Back to site"})]})}),e.jsx("nav",{className:"admin-tabs",children:[{id:"video",label:"Hero Video"},{id:"pricing",label:"Pricing"},{id:"portfolio",label:"Portfolio"}].map(m=>e.jsx("button",{className:`admin-tab ${d===m.id?"active":""}`,onClick:()=>s(m.id),children:m.label},m.id))}),e.jsxs("main",{className:"admin-main",children:[d==="video"&&e.jsx(U,{}),d==="pricing"&&e.jsx(k,{}),d==="portfolio"&&e.jsx(L,{})]})]}):e.jsx("div",{className:"admin-login-page",children:e.jsxs("form",{className:"admin-login-box",onSubmit:g,children:[e.jsx("img",{src:"/logo_white.svg",alt:"Kaizen Detailers",style:{width:48,marginBottom:16}}),e.jsx("h2",{children:"Admin Panel"}),e.jsx("p",{children:"Enter password to continue"}),e.jsx("input",{type:"password",className:"admin-input",value:c,onChange:m=>p(m.target.value),placeholder:"Password",autoFocus:!0}),n&&e.jsx("p",{className:"admin-error",children:n}),e.jsx("button",{type:"submit",className:"admin-btn",style:{width:"100%",marginTop:12},children:"Login"})]})})}export{v as STORAGE_KEYS,F as default};
